{"ast":null,"code":"var _jsxFileName = \"/Users/work/Documents/FinalProject/soup/src/Component/BaseAdminView/BaseAdminView.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport PaymentIcon from \"@mui/icons-material/Payment\";\nimport PaymentsIcon from \"@mui/icons-material/Payments\";\nimport PersonIcon from \"@mui/icons-material/Person\";\nimport { Navigate, useLocation } from \"react-router-dom\";\nimport useAuth from \"../../hook/useAuth\";\nimport Sidebar from \"./Sidebar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst sidebarItems = [{\n  text: \"Invoice\",\n  icon: /*#__PURE__*/_jsxDEV(PaymentsIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 11\n  }, this),\n  path: \"/invoice\",\n  roles: [\"user\", \"admin\"]\n}, {\n  text: \"Payment Method\",\n  icon: /*#__PURE__*/_jsxDEV(PaymentIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 11\n  }, this),\n  path: \"/admin/payment-method\",\n  roles: [\"admin\"]\n}, {\n  text: \"User Page\",\n  icon: /*#__PURE__*/_jsxDEV(PersonIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 11\n  }, this),\n  path: \"/admin/user\",\n  roles: [\"admin\"]\n}];\n\nfunction isAuthorized(user, path) {\n  const sidebarItem = sidebarItems.find(item => item.path === path);\n  return user && sidebarItem.roles.some(role => role === user.role_name);\n}\n\nconst BaseAdminView = props => {\n  _s();\n\n  const location = useLocation();\n  const {\n    user,\n    isValidatingToken\n  } = useAuth();\n  const {\n    children\n  } = props;\n\n  if (!isValidatingToken && !isAuthorized(user, location.pathname)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 2,\n      children: /*#__PURE__*/_jsxDEV(Sidebar, {\n        items: sidebarItems,\n        isAuthorized: isAuthorized\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 10,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BaseAdminView, \"xlOjiDo0XVntJxWpTe7jEPT4Z6o=\", false, function () {\n  return [useLocation, useAuth];\n});\n\n_c = BaseAdminView;\nexport default BaseAdminView;\n\nvar _c;\n\n$RefreshReg$(_c, \"BaseAdminView\");","map":{"version":3,"names":["React","Grid","PaymentIcon","PaymentsIcon","PersonIcon","Navigate","useLocation","useAuth","Sidebar","sidebarItems","text","icon","path","roles","isAuthorized","user","sidebarItem","find","item","some","role","role_name","BaseAdminView","props","location","isValidatingToken","children","pathname"],"sources":["/Users/work/Documents/FinalProject/soup/src/Component/BaseAdminView/BaseAdminView.js"],"sourcesContent":["import React from \"react\";\n\nimport Grid from \"@mui/material/Grid\";\n\nimport PaymentIcon from \"@mui/icons-material/Payment\";\nimport PaymentsIcon from \"@mui/icons-material/Payments\";\nimport PersonIcon from \"@mui/icons-material/Person\";\n\nimport { Navigate, useLocation } from \"react-router-dom\";\n\nimport useAuth from \"../../hook/useAuth\";\n\nimport Sidebar from \"./Sidebar\";\n\nconst sidebarItems = [\n  {\n    text: \"Invoice\",\n    icon: <PaymentsIcon />,\n    path: \"/invoice\",\n    roles: [\"user\", \"admin\"],\n  },\n  {\n    text: \"Payment Method\",\n    icon: <PaymentIcon />,\n    path: \"/admin/payment-method\",\n    roles: [\"admin\"],\n  },\n  {\n    text: \"User Page\",\n    icon: <PersonIcon />,\n    path: \"/admin/user\",\n    roles: [\"admin\"],\n  },\n];\n\nfunction isAuthorized(user, path) {\n  const sidebarItem = sidebarItems.find((item) => item.path === path);\n  return user && sidebarItem.roles.some((role) => role === user.role_name);\n}\n\nconst BaseAdminView = (props) => {\n  const location = useLocation();\n  const { user, isValidatingToken } = useAuth();\n\n  const { children } = props;\n\n  if (!isValidatingToken && !isAuthorized(user, location.pathname)) {\n    return <Navigate to={\"/\"} />;\n  }\n\n  return (\n    <Grid container>\n      <Grid item xs={2}>\n        <Sidebar items={sidebarItems} isAuthorized={isAuthorized} />\n      </Grid>\n      <Grid item xs={10}>\n        {children}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default BaseAdminView;\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,IAAP,MAAiB,oBAAjB;AAEA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,UAAP,MAAuB,4BAAvB;AAEA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,kBAAtC;AAEA,OAAOC,OAAP,MAAoB,oBAApB;AAEA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,YAAY,GAAG,CACnB;EACEC,IAAI,EAAE,SADR;EAEEC,IAAI,eAAE,QAAC,YAAD;IAAA;IAAA;IAAA;EAAA,QAFR;EAGEC,IAAI,EAAE,UAHR;EAIEC,KAAK,EAAE,CAAC,MAAD,EAAS,OAAT;AAJT,CADmB,EAOnB;EACEH,IAAI,EAAE,gBADR;EAEEC,IAAI,eAAE,QAAC,WAAD;IAAA;IAAA;IAAA;EAAA,QAFR;EAGEC,IAAI,EAAE,uBAHR;EAIEC,KAAK,EAAE,CAAC,OAAD;AAJT,CAPmB,EAanB;EACEH,IAAI,EAAE,WADR;EAEEC,IAAI,eAAE,QAAC,UAAD;IAAA;IAAA;IAAA;EAAA,QAFR;EAGEC,IAAI,EAAE,aAHR;EAIEC,KAAK,EAAE,CAAC,OAAD;AAJT,CAbmB,CAArB;;AAqBA,SAASC,YAAT,CAAsBC,IAAtB,EAA4BH,IAA5B,EAAkC;EAChC,MAAMI,WAAW,GAAGP,YAAY,CAACQ,IAAb,CAAmBC,IAAD,IAAUA,IAAI,CAACN,IAAL,KAAcA,IAA1C,CAApB;EACA,OAAOG,IAAI,IAAIC,WAAW,CAACH,KAAZ,CAAkBM,IAAlB,CAAwBC,IAAD,IAAUA,IAAI,KAAKL,IAAI,CAACM,SAA/C,CAAf;AACD;;AAED,MAAMC,aAAa,GAAIC,KAAD,IAAW;EAAA;;EAC/B,MAAMC,QAAQ,GAAGlB,WAAW,EAA5B;EACA,MAAM;IAAES,IAAF;IAAQU;EAAR,IAA8BlB,OAAO,EAA3C;EAEA,MAAM;IAAEmB;EAAF,IAAeH,KAArB;;EAEA,IAAI,CAACE,iBAAD,IAAsB,CAACX,YAAY,CAACC,IAAD,EAAOS,QAAQ,CAACG,QAAhB,CAAvC,EAAkE;IAChE,oBAAO,QAAC,QAAD;MAAU,EAAE,EAAE;IAAd;MAAA;MAAA;MAAA;IAAA,QAAP;EACD;;EAED,oBACE,QAAC,IAAD;IAAM,SAAS,MAAf;IAAA,wBACE,QAAC,IAAD;MAAM,IAAI,MAAV;MAAW,EAAE,EAAE,CAAf;MAAA,uBACE,QAAC,OAAD;QAAS,KAAK,EAAElB,YAAhB;QAA8B,YAAY,EAAEK;MAA5C;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADF,eAIE,QAAC,IAAD;MAAM,IAAI,MAAV;MAAW,EAAE,EAAE,EAAf;MAAA,UACGY;IADH;MAAA;MAAA;MAAA;IAAA,QAJF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAUD,CApBD;;GAAMJ,a;UACahB,W,EACmBC,O;;;KAFhCe,a;AAsBN,eAAeA,aAAf"},"metadata":{},"sourceType":"module"}