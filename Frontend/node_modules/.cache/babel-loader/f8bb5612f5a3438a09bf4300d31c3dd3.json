{"ast":null,"code":"import _slicedToArray from\"/Users/work/Documents/FinalProject/soup/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import LinearProgress from\"@mui/material/LinearProgress\";import AlertDialog from\"../AlertDialog/AlertDialog\";import BaseAdminView from\"../BaseAdminView/BaseAdminView\";import AdminInvoiceTable from\"./AdminInvoiceTable\";import UserInvoiceTable from\"./UserInvoiceTable\";import{getAllUserInvoices,getUserInvoices}from\"../../api/invoice\";import useAuth from\"../../hook/useAuth\";import{Helmet}from\"react-helmet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InvoicePage=function InvoicePage(){var _useAuth=useAuth(),user=_useAuth.user;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),invoices=_useState4[0],setInvoices=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),table=_useState6[0],setTable=_useState6[1];var _useState7=useState({open:false,severity:\"\",message:\"\"}),_useState8=_slicedToArray(_useState7,2),alertData=_useState8[0],setAlertData=_useState8[1];var closeAlert=function closeAlert(){setAlertData({open:false,severity:\"\",message:\"\"});};useEffect(function(){if(!user)return;var apiFunc=user.role_name===\"admin\"?getAllUserInvoices:getUserInvoices;setLoading(true);apiFunc().then(function(res){setInvoices(res.data);}).catch(function(err){var _err$response;var errMsg=err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data;setAlertData({open:true,severity:\"error\",message:errMsg});}).finally(function(){return setLoading(false);});},[user]);useEffect(function(){if(!user)return;switch(user.role_name){case\"admin\":setTable(/*#__PURE__*/_jsx(AdminInvoiceTable,{invoices:invoices}));break;case\"user\":setTable(/*#__PURE__*/_jsx(UserInvoiceTable,{invoices:invoices}));break;}},[invoices]);return/*#__PURE__*/_jsxs(BaseAdminView,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"SOUP | Invoice\"})}),loading?/*#__PURE__*/_jsx(LinearProgress,{}):null,table,/*#__PURE__*/_jsx(AlertDialog,{open:alertData.open,severity:alertData.severity,message:alertData.message,handleClose:closeAlert})]});};export default InvoicePage;","map":{"version":3,"names":["React","useEffect","useState","LinearProgress","AlertDialog","BaseAdminView","AdminInvoiceTable","UserInvoiceTable","getAllUserInvoices","getUserInvoices","useAuth","Helmet","InvoicePage","user","loading","setLoading","invoices","setInvoices","table","setTable","open","severity","message","alertData","setAlertData","closeAlert","apiFunc","role_name","then","res","data","catch","err","errMsg","response","finally"],"sources":["/Users/work/Documents/FinalProject/soup/src/Component/InvoicePage/InvoicePage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport LinearProgress from \"@mui/material/LinearProgress\";\n\nimport AlertDialog from \"../AlertDialog/AlertDialog\";\nimport BaseAdminView from \"../BaseAdminView/BaseAdminView\";\nimport AdminInvoiceTable from \"./AdminInvoiceTable\";\nimport UserInvoiceTable from \"./UserInvoiceTable\";\n\nimport { getAllUserInvoices, getUserInvoices } from \"../../api/invoice\";\nimport useAuth from \"../../hook/useAuth\";\nimport { Helmet } from \"react-helmet\";\n\nconst InvoicePage = () => {\n  const { user } = useAuth();\n\n  const [loading, setLoading] = useState(true);\n  const [invoices, setInvoices] = useState([]);\n  const [table, setTable] = useState(null);\n  const [alertData, setAlertData] = useState({\n    open: false,\n    severity: \"\",\n    message: \"\",\n  });\n\n  const closeAlert = () => {\n    setAlertData({ open: false, severity: \"\", message: \"\" });\n  };\n\n  useEffect(() => {\n    if (!user) return;\n\n    const apiFunc =\n      user.role_name === \"admin\" ? getAllUserInvoices : getUserInvoices;\n\n    setLoading(true);\n    apiFunc()\n      .then((res) => {\n        setInvoices(res.data);\n      })\n      .catch((err) => {\n        const errMsg = err?.response?.data;\n        setAlertData({ open: true, severity: \"error\", message: errMsg });\n      })\n      .finally(() => setLoading(false));\n  }, [user]);\n\n  useEffect(() => {\n    if (!user) return;\n\n    switch (user.role_name) {\n      case \"admin\":\n        setTable(<AdminInvoiceTable invoices={invoices} />);\n        break;\n      case \"user\":\n        setTable(<UserInvoiceTable invoices={invoices} />);\n        break;\n    }\n  }, [invoices]);\n\n  return (\n    <BaseAdminView>\n      <Helmet>\n        <title>SOUP | Invoice</title>\n      </Helmet>\n      {loading ? <LinearProgress /> : null}\n      {table}\n      <AlertDialog\n        open={alertData.open}\n        severity={alertData.severity}\n        message={alertData.message}\n        handleClose={closeAlert}\n      />\n    </BaseAdminView>\n  );\n};\n\nexport default InvoicePage;\n"],"mappings":"6HAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CAEA,MAAOC,eAAP,KAA2B,8BAA3B,CAEA,MAAOC,YAAP,KAAwB,4BAAxB,CACA,MAAOC,cAAP,KAA0B,gCAA1B,CACA,MAAOC,kBAAP,KAA8B,qBAA9B,CACA,MAAOC,iBAAP,KAA6B,oBAA7B,CAEA,OAASC,kBAAT,CAA6BC,eAA7B,KAAoD,mBAApD,CACA,MAAOC,QAAP,KAAoB,oBAApB,CACA,OAASC,MAAT,KAAuB,cAAvB,C,wFAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxB,aAAiBF,OAAO,EAAxB,CAAQG,IAAR,UAAQA,IAAR,CAEA,cAA8BX,QAAQ,CAAC,IAAD,CAAtC,wCAAOY,OAAP,eAAgBC,UAAhB,eACA,eAAgCb,QAAQ,CAAC,EAAD,CAAxC,yCAAOc,QAAP,eAAiBC,WAAjB,eACA,eAA0Bf,QAAQ,CAAC,IAAD,CAAlC,yCAAOgB,KAAP,eAAcC,QAAd,eACA,eAAkCjB,QAAQ,CAAC,CACzCkB,IAAI,CAAE,KADmC,CAEzCC,QAAQ,CAAE,EAF+B,CAGzCC,OAAO,CAAE,EAHgC,CAAD,CAA1C,yCAAOC,SAAP,eAAkBC,YAAlB,eAMA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvBD,YAAY,CAAC,CAAEJ,IAAI,CAAE,KAAR,CAAeC,QAAQ,CAAE,EAAzB,CAA6BC,OAAO,CAAE,EAAtC,CAAD,CAAZ,CACD,CAFD,CAIArB,SAAS,CAAC,UAAM,CACd,GAAI,CAACY,IAAL,CAAW,OAEX,GAAMa,QAAO,CACXb,IAAI,CAACc,SAAL,GAAmB,OAAnB,CAA6BnB,kBAA7B,CAAkDC,eADpD,CAGAM,UAAU,CAAC,IAAD,CAAV,CACAW,OAAO,GACJE,IADH,CACQ,SAACC,GAAD,CAAS,CACbZ,WAAW,CAACY,GAAG,CAACC,IAAL,CAAX,CACD,CAHH,EAIGC,KAJH,CAIS,SAACC,GAAD,CAAS,mBACd,GAAMC,OAAM,CAAGD,GAAH,SAAGA,GAAH,gCAAGA,GAAG,CAAEE,QAAR,wCAAG,cAAeJ,IAA9B,CACAN,YAAY,CAAC,CAAEJ,IAAI,CAAE,IAAR,CAAcC,QAAQ,CAAE,OAAxB,CAAiCC,OAAO,CAAEW,MAA1C,CAAD,CAAZ,CACD,CAPH,EAQGE,OARH,CAQW,iBAAMpB,WAAU,CAAC,KAAD,CAAhB,EARX,EASD,CAhBQ,CAgBN,CAACF,IAAD,CAhBM,CAAT,CAkBAZ,SAAS,CAAC,UAAM,CACd,GAAI,CAACY,IAAL,CAAW,OAEX,OAAQA,IAAI,CAACc,SAAb,EACE,IAAK,OAAL,CACER,QAAQ,cAAC,KAAC,iBAAD,EAAmB,QAAQ,CAAEH,QAA7B,EAAD,CAAR,CACA,MACF,IAAK,MAAL,CACEG,QAAQ,cAAC,KAAC,gBAAD,EAAkB,QAAQ,CAAEH,QAA5B,EAAD,CAAR,CACA,MANJ,CAQD,CAXQ,CAWN,CAACA,QAAD,CAXM,CAAT,CAaA,mBACE,MAAC,aAAD,yBACE,KAAC,MAAD,wBACE,yCADF,EADF,CAIGF,OAAO,cAAG,KAAC,cAAD,IAAH,CAAwB,IAJlC,CAKGI,KALH,cAME,KAAC,WAAD,EACE,IAAI,CAAEK,SAAS,CAACH,IADlB,CAEE,QAAQ,CAAEG,SAAS,CAACF,QAFtB,CAGE,OAAO,CAAEE,SAAS,CAACD,OAHrB,CAIE,WAAW,CAAEG,UAJf,EANF,GADF,CAeD,CA9DD,CAgEA,cAAeb,YAAf"},"metadata":{},"sourceType":"module"}