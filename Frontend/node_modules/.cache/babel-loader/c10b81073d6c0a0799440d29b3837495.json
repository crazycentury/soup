{"ast":null,"code":"import _slicedToArray from\"/Users/work/Documents/FinalProject/soup/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Button from\"@mui/material/Button\";import Stack from\"@mui/material/Stack\";import TextField from\"@mui/material/TextField\";import Typography from\"@mui/material/Typography\";import Alert from\"@mui/material/Alert\";import{useTheme}from\"@mui/material/styles\";import{useNavigate}from\"react-router-dom\";import Container from\"@mui/material/Container\";import AlertDialog from\"../AlertDialog/AlertDialog\";import{askResetPassword}from\"../../api/auth\";import{Helmet}from\"react-helmet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResetPasswordEmailPage=function ResetPasswordEmailPage(){var theme=useTheme();var primaryColor=theme.palette.primary.main;var gray1=theme.palette.gray1.main;var gray2=theme.palette.gray2.main;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),formAlert=_useState4[0],setFormAlert=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openAlert=_useState6[0],setOpenAlert=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),alertMsg=_useState8[0],setAlertMsg=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),alertType=_useState10[0],setAlertType=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isSendingEmail=_useState12[0],setIsSendingEmail=_useState12[1];var validateForm=function validateForm(){if(!email)return\"Please enter your email address\";return null;};var closeAlert=function closeAlert(){setOpenAlert(false);};var sendEmail=function sendEmail(){var errorMsg=validateForm();if(errorMsg){setFormAlert(/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:errorMsg}));return;}setIsSendingEmail(true);askResetPassword(email).then(function(){setAlertMsg(\"Email has sent, please check your email\");setAlertType(\"success\");setOpenAlert(true);}).catch(function(err){var _err$response;var errorMsg=err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data;if(errorMsg===\"Email not registered\"){setAlertMsg(errorMsg);setAlertType(\"error\");setOpenAlert(true);return;}setFormAlert(/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:errorMsg}));}).finally(function(){return setIsSendingEmail(false);});};useEffect(function(){setFormAlert(null);},[email]);var buttonStyle={width:\"140px\",borderRadius:\"8px\",color:primaryColor,textTransform:\"none\"};return/*#__PURE__*/_jsxs(Container,{component:\"form\",maxWidth:\"616px\",sx:{maxWidth:\"616px\",mt:12,textAlign:\"left\"},children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"SOUP | Reset Password\"})}),/*#__PURE__*/_jsxs(Stack,{spacing:\"60px\",mb:5,children:[/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h1\",sx:{color:gray1},children:\"Reset Password\"}),/*#__PURE__*/_jsx(Typography,{paragraph:true,sx:{color:gray2},children:\"Send OTP code to your email address\"})]}),/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[formAlert,/*#__PURE__*/_jsx(TextField,{required:true,type:\"email\",label:\"Email\",onChange:function onChange(e){return setEmail(e.target.value);}})]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:3,sx:{justifyContent:\"flex-end\"},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",sx:buttonStyle,onClick:function onClick(){return navigate(\"/login\");},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",disabled:isSendingEmail,sx:buttonStyle,onClick:sendEmail,children:\"Confirm\"})]}),/*#__PURE__*/_jsx(AlertDialog,{open:openAlert,handleClose:closeAlert,severity:alertType,message:alertMsg})]});};export default ResetPasswordEmailPage;","map":{"version":3,"names":["React","useState","useEffect","Button","Stack","TextField","Typography","Alert","useTheme","useNavigate","Container","AlertDialog","askResetPassword","Helmet","ResetPasswordEmailPage","theme","primaryColor","palette","primary","main","gray1","gray2","navigate","email","setEmail","formAlert","setFormAlert","openAlert","setOpenAlert","alertMsg","setAlertMsg","alertType","setAlertType","isSendingEmail","setIsSendingEmail","validateForm","closeAlert","sendEmail","errorMsg","then","catch","err","response","data","finally","buttonStyle","width","borderRadius","color","textTransform","maxWidth","mt","textAlign","e","target","value","justifyContent"],"sources":["/Users/work/Documents/FinalProject/soup/src/Component/ResetPasswordEmailPage/ResetPasswordEmailPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport Typography from \"@mui/material/Typography\";\nimport Alert from \"@mui/material/Alert\";\nimport { useTheme } from \"@mui/material/styles\";\nimport { useNavigate } from \"react-router-dom\";\nimport Container from \"@mui/material/Container\";\n\nimport AlertDialog from \"../AlertDialog/AlertDialog\";\n\nimport { askResetPassword } from \"../../api/auth\";\nimport { Helmet } from \"react-helmet\";\n\nconst ResetPasswordEmailPage = () => {\n  const theme = useTheme();\n  const primaryColor = theme.palette.primary.main;\n  const gray1 = theme.palette.gray1.main;\n  const gray2 = theme.palette.gray2.main;\n  const navigate = useNavigate();\n\n  const [email, setEmail] = useState(\"\");\n  const [formAlert, setFormAlert] = useState(null);\n  const [openAlert, setOpenAlert] = useState(false);\n  const [alertMsg, setAlertMsg] = useState(\"\");\n  const [alertType, setAlertType] = useState(\"\");\n  const [isSendingEmail, setIsSendingEmail] = useState(false);\n\n  const validateForm = () => {\n    if (!email) return \"Please enter your email address\";\n\n    return null;\n  };\n\n  const closeAlert = () => {\n    setOpenAlert(false);\n  };\n\n  const sendEmail = () => {\n    const errorMsg = validateForm();\n    if (errorMsg) {\n      setFormAlert(<Alert severity=\"error\">{errorMsg}</Alert>);\n      return;\n    }\n\n    setIsSendingEmail(true);\n    askResetPassword(email)\n      .then(() => {\n        setAlertMsg(\"Email has sent, please check your email\");\n        setAlertType(\"success\");\n        setOpenAlert(true);\n      })\n      .catch((err) => {\n        const errorMsg = err?.response?.data;\n\n        if (errorMsg === \"Email not registered\") {\n          setAlertMsg(errorMsg);\n          setAlertType(\"error\");\n          setOpenAlert(true);\n          return;\n        }\n\n        setFormAlert(<Alert severity=\"error\">{errorMsg}</Alert>);\n      })\n      .finally(() => setIsSendingEmail(false));\n  };\n\n  useEffect(() => {\n    setFormAlert(null);\n  }, [email]);\n\n  const buttonStyle = {\n    width: \"140px\",\n    borderRadius: \"8px\",\n    color: primaryColor,\n    textTransform: \"none\",\n  };\n\n  return (\n    <Container\n      component=\"form\"\n      maxWidth=\"616px\"\n      sx={{ maxWidth: \"616px\", mt: 12, textAlign: \"left\" }}\n    >\n      <Helmet>\n        <title>SOUP | Reset Password</title>\n      </Helmet>\n      <Stack spacing=\"60px\" mb={5}>\n        <Stack spacing={2}>\n          <Typography variant=\"h5\" component=\"h1\" sx={{ color: gray1 }}>\n            Reset Password\n          </Typography>\n          <Typography paragraph={true} sx={{ color: gray2 }}>\n            Send OTP code to your email address\n          </Typography>\n        </Stack>\n        <Stack spacing={3}>\n          {formAlert}\n          <TextField\n            required\n            type=\"email\"\n            label=\"Email\"\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </Stack>\n      </Stack>\n      <Stack direction=\"row\" spacing={3} sx={{ justifyContent: \"flex-end\" }}>\n        <Button\n          variant=\"outlined\"\n          color=\"primary\"\n          sx={buttonStyle}\n          onClick={() => navigate(\"/login\")}\n        >\n          Cancel\n        </Button>\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          disabled={isSendingEmail}\n          sx={buttonStyle}\n          onClick={sendEmail}\n        >\n          Confirm\n        </Button>\n      </Stack>\n\n      <AlertDialog\n        open={openAlert}\n        handleClose={closeAlert}\n        severity={alertType}\n        message={alertMsg}\n      />\n    </Container>\n  );\n};\n\nexport default ResetPasswordEmailPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}