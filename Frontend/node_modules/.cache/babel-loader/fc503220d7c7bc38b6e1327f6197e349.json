{"ast":null,"code":"var _jsxFileName = \"/Users/work/Documents/FinalProject/soup/src/Component/InvoicePage/InvoicePage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport LinearProgress from \"@mui/material/LinearProgress\";\nimport AlertDialog from \"../AlertDialog/AlertDialog\";\nimport BaseAdminView from \"../BaseAdminView/BaseAdminView\";\nimport AdminInvoiceTable from \"./AdminInvoiceTable\";\nimport UserInvoiceTable from \"./UserInvoiceTable\";\nimport { getAllUserInvoices, getUserInvoices } from \"../../api/invoice\";\nimport useAuth from \"../../hook/useAuth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst InvoicePage = () => {\n  _s();\n\n  const {\n    user\n  } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [invoices, setInvoices] = useState([]);\n  const [table, setTable] = useState(null);\n  const [alertData, setAlertData] = useState({\n    open: false,\n    severity: \"\",\n    message: \"\"\n  });\n\n  const closeAlert = () => {\n    setAlertData({\n      open: false,\n      severity: \"\",\n      message: \"\"\n    });\n  };\n\n  useEffect(() => {\n    if (!user) return;\n    const apiFunc = user.role_name === \"admin\" ? getAllUserInvoices : getUserInvoices;\n    setLoading(true);\n    apiFunc().then(res => {\n      setInvoices(res.data);\n    }).catch(err => {\n      var _err$response;\n\n      const errMsg = err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data;\n      setAlertData({\n        open: true,\n        severity: \"error\",\n        message: errMsg\n      });\n    }).finally(() => setLoading(false));\n  }, [user]);\n  useEffect(() => {\n    if (!user) return;\n\n    switch (user.role_name) {\n      case \"admin\":\n        setTable( /*#__PURE__*/_jsxDEV(AdminInvoiceTable, {\n          invoices: invoices\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 18\n        }, this));\n        break;\n\n      case \"user\":\n        setTable( /*#__PURE__*/_jsxDEV(UserInvoiceTable, {\n          invoices: invoices\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 18\n        }, this));\n        break;\n    }\n  }, [invoices]);\n  return /*#__PURE__*/_jsxDEV(BaseAdminView, {\n    children: [loading ? /*#__PURE__*/_jsxDEV(LinearProgress, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 18\n    }, this) : null, table, /*#__PURE__*/_jsxDEV(AlertDialog, {\n      open: alertData.open,\n      severity: alertData.severity,\n      message: alertData.message,\n      handleClose: closeAlert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n\n_s(InvoicePage, \"y7ecpgO8/YqZkWDYURgyg/MeFxA=\", false, function () {\n  return [useAuth];\n});\n\n_c = InvoicePage;\nexport default InvoicePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"InvoicePage\");","map":{"version":3,"names":["React","useEffect","useState","LinearProgress","AlertDialog","BaseAdminView","AdminInvoiceTable","UserInvoiceTable","getAllUserInvoices","getUserInvoices","useAuth","InvoicePage","user","loading","setLoading","invoices","setInvoices","table","setTable","alertData","setAlertData","open","severity","message","closeAlert","apiFunc","role_name","then","res","data","catch","err","errMsg","response","finally"],"sources":["/Users/work/Documents/FinalProject/soup/src/Component/InvoicePage/InvoicePage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport LinearProgress from \"@mui/material/LinearProgress\";\n\nimport AlertDialog from \"../AlertDialog/AlertDialog\";\nimport BaseAdminView from \"../BaseAdminView/BaseAdminView\";\nimport AdminInvoiceTable from \"./AdminInvoiceTable\";\nimport UserInvoiceTable from \"./UserInvoiceTable\";\n\nimport { getAllUserInvoices, getUserInvoices } from \"../../api/invoice\";\nimport useAuth from \"../../hook/useAuth\";\n\nconst InvoicePage = () => {\n  const { user } = useAuth();\n\n  const [loading, setLoading] = useState(true);\n  const [invoices, setInvoices] = useState([]);\n  const [table, setTable] = useState(null);\n  const [alertData, setAlertData] = useState({\n    open: false,\n    severity: \"\",\n    message: \"\",\n  });\n\n  const closeAlert = () => {\n    setAlertData({ open: false, severity: \"\", message: \"\" });\n  };\n\n  useEffect(() => {\n    if (!user) return;\n\n    const apiFunc =\n      user.role_name === \"admin\" ? getAllUserInvoices : getUserInvoices;\n\n    setLoading(true);\n    apiFunc()\n      .then((res) => {\n        setInvoices(res.data);\n      })\n      .catch((err) => {\n        const errMsg = err?.response?.data;\n        setAlertData({ open: true, severity: \"error\", message: errMsg });\n      })\n      .finally(() => setLoading(false));\n  }, [user]);\n\n  useEffect(() => {\n    if (!user) return;\n\n    switch (user.role_name) {\n      case \"admin\":\n        setTable(<AdminInvoiceTable invoices={invoices} />);\n        break;\n      case \"user\":\n        setTable(<UserInvoiceTable invoices={invoices} />);\n        break;\n    }\n  }, [invoices]);\n\n  return (\n    <BaseAdminView>\n      {loading ? <LinearProgress /> : null}\n      {table}\n      <AlertDialog\n        open={alertData.open}\n        severity={alertData.severity}\n        message={alertData.message}\n        handleClose={closeAlert}\n      />\n    </BaseAdminView>\n  );\n};\n\nexport default InvoicePage;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAEA,OAAOC,cAAP,MAA2B,8BAA3B;AAEA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,aAAP,MAA0B,gCAA1B;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AAEA,SAASC,kBAAT,EAA6BC,eAA7B,QAAoD,mBAApD;AACA,OAAOC,OAAP,MAAoB,oBAApB;;;AAEA,MAAMC,WAAW,GAAG,MAAM;EAAA;;EACxB,MAAM;IAAEC;EAAF,IAAWF,OAAO,EAAxB;EAEA,MAAM,CAACG,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,IAAD,CAAtC;EACA,MAAM,CAACa,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACe,KAAD,EAAQC,QAAR,IAAoBhB,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACiB,SAAD,EAAYC,YAAZ,IAA4BlB,QAAQ,CAAC;IACzCmB,IAAI,EAAE,KADmC;IAEzCC,QAAQ,EAAE,EAF+B;IAGzCC,OAAO,EAAE;EAHgC,CAAD,CAA1C;;EAMA,MAAMC,UAAU,GAAG,MAAM;IACvBJ,YAAY,CAAC;MAAEC,IAAI,EAAE,KAAR;MAAeC,QAAQ,EAAE,EAAzB;MAA6BC,OAAO,EAAE;IAAtC,CAAD,CAAZ;EACD,CAFD;;EAIAtB,SAAS,CAAC,MAAM;IACd,IAAI,CAACW,IAAL,EAAW;IAEX,MAAMa,OAAO,GACXb,IAAI,CAACc,SAAL,KAAmB,OAAnB,GAA6BlB,kBAA7B,GAAkDC,eADpD;IAGAK,UAAU,CAAC,IAAD,CAAV;IACAW,OAAO,GACJE,IADH,CACSC,GAAD,IAAS;MACbZ,WAAW,CAACY,GAAG,CAACC,IAAL,CAAX;IACD,CAHH,EAIGC,KAJH,CAIUC,GAAD,IAAS;MAAA;;MACd,MAAMC,MAAM,GAAGD,GAAH,aAAGA,GAAH,wCAAGA,GAAG,CAAEE,QAAR,kDAAG,cAAeJ,IAA9B;MACAT,YAAY,CAAC;QAAEC,IAAI,EAAE,IAAR;QAAcC,QAAQ,EAAE,OAAxB;QAAiCC,OAAO,EAAES;MAA1C,CAAD,CAAZ;IACD,CAPH,EAQGE,OARH,CAQW,MAAMpB,UAAU,CAAC,KAAD,CAR3B;EASD,CAhBQ,EAgBN,CAACF,IAAD,CAhBM,CAAT;EAkBAX,SAAS,CAAC,MAAM;IACd,IAAI,CAACW,IAAL,EAAW;;IAEX,QAAQA,IAAI,CAACc,SAAb;MACE,KAAK,OAAL;QACER,QAAQ,eAAC,QAAC,iBAAD;UAAmB,QAAQ,EAAEH;QAA7B;UAAA;UAAA;UAAA;QAAA,QAAD,CAAR;QACA;;MACF,KAAK,MAAL;QACEG,QAAQ,eAAC,QAAC,gBAAD;UAAkB,QAAQ,EAAEH;QAA5B;UAAA;UAAA;UAAA;QAAA,QAAD,CAAR;QACA;IANJ;EAQD,CAXQ,EAWN,CAACA,QAAD,CAXM,CAAT;EAaA,oBACE,QAAC,aAAD;IAAA,WACGF,OAAO,gBAAG,QAAC,cAAD;MAAA;MAAA;MAAA;IAAA,QAAH,GAAwB,IADlC,EAEGI,KAFH,eAGE,QAAC,WAAD;MACE,IAAI,EAAEE,SAAS,CAACE,IADlB;MAEE,QAAQ,EAAEF,SAAS,CAACG,QAFtB;MAGE,OAAO,EAAEH,SAAS,CAACI,OAHrB;MAIE,WAAW,EAAEC;IAJf;MAAA;MAAA;MAAA;IAAA,QAHF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAYD,CA3DD;;GAAMb,W;UACaD,O;;;KADbC,W;AA6DN,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}