{"ast":null,"code":"import _slicedToArray from\"/Users/work/Documents/FinalProject/soup/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Button from\"@mui/material/Button\";import Stack from\"@mui/material/Stack\";import TextField from\"@mui/material/TextField\";import Typography from\"@mui/material/Typography\";import Alert from\"@mui/material/Alert\";import Container from\"@mui/material/Container\";import CustomLink from\"../CustomLink/CustomLink\";import{useTheme}from\"@mui/material/styles\";import{useNavigate,Navigate}from\"react-router-dom\";import useAuth from\"../../hook/useAuth\";import{login}from\"../../api/auth\";import{Helmet}from\"react-helmet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=function LoginPage(){var theme=useTheme();var primaryColor=theme.palette.primary.main;var gray2=theme.palette.gray2.main;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),alertMsg=_useState6[0],setAlertMsg=_useState6[1];var _useAuth=useAuth(),user=_useAuth.user,storeLoginData=_useAuth.storeLoginData;var validateForm=function validateForm(){if(!email)return\"Please enter your email address\";if(!password)return\"Please enter your password\";return null;};var rolePage=function rolePage(role){if(role===\"admin\"){navigate(\"/admin/user\");}else{navigate(\"/\");}};var tryLogin=function tryLogin(){var errorMsg=validateForm();if(errorMsg){setAlertMsg(/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:errorMsg}));return;}login(email,password).then(function(res){storeLoginData(res.data);rolePage(res.data.user_data.role_name);}).catch(function(err){var _err$response;var errorMsg=(err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||\"Unknown error occured\";setAlertMsg(/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:errorMsg}));});};// Remove the alert whenever any input value changes\nuseEffect(function(){setAlertMsg(null);},[email,password]);// Redirect authenticated user back to the previous page\nif(user){return/*#__PURE__*/_jsx(Navigate,{to:-1,replace:true});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"616px\",sx:{maxWidth:\"616px\",mt:\"60px\"},children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"SOUP | Login\"})}),/*#__PURE__*/_jsxs(Stack,{component:\"form\",spacing:5,mb:\"60px\",sx:{textAlign:\"left\"},children:[/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h1\",sx:{color:primaryColor,fontWeight:\"500\"},children:\"Welcome Back! Cheff\"}),/*#__PURE__*/_jsx(Typography,{paragraph:true,sx:{color:gray2},children:\"Please login first\"})]}),/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[alertMsg,/*#__PURE__*/_jsx(TextField,{required:true,type:\"email\",label:\"Email\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{required:true,type:\"password\",label:\"Password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsxs(Typography,{paragraph:true,sx:{color:gray2},children:[\"Forgot Password? \",/*#__PURE__*/_jsx(CustomLink,{to:\"/resetpasswordemail\",children:\"Click Here\"})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",sx:{width:\"140px\",alignSelf:\"flex-end\",borderRadius:\"8px\",color:primaryColor,textTransform:\"none\"},onClick:tryLogin,children:\"Login\"})]}),/*#__PURE__*/_jsxs(Typography,{paragraph:true,sx:{textAlign:\"center\"},children:[\"Dont have account? \",/*#__PURE__*/_jsx(CustomLink,{to:\"/register\",children:\"Sign Up here\"})]})]});};export default LoginPage;","map":{"version":3,"names":["React","useState","useEffect","Button","Stack","TextField","Typography","Alert","Container","CustomLink","useTheme","useNavigate","Navigate","useAuth","login","Helmet","LoginPage","theme","primaryColor","palette","primary","main","gray2","navigate","email","setEmail","password","setPassword","alertMsg","setAlertMsg","user","storeLoginData","validateForm","rolePage","role","tryLogin","errorMsg","then","res","data","user_data","role_name","catch","err","response","maxWidth","mt","textAlign","color","fontWeight","e","target","value","width","alignSelf","borderRadius","textTransform"],"sources":["/Users/work/Documents/FinalProject/soup/src/Component/LoginPage/LoginPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport Typography from \"@mui/material/Typography\";\nimport Alert from \"@mui/material/Alert\";\nimport Container from \"@mui/material/Container\";\n\nimport CustomLink from \"../CustomLink/CustomLink\";\n\nimport { useTheme } from \"@mui/material/styles\";\nimport { useNavigate, Navigate } from \"react-router-dom\";\n\nimport useAuth from \"../../hook/useAuth\";\n\nimport { login } from \"../../api/auth\";\nimport { Helmet } from \"react-helmet\";\n\nconst LoginPage = () => {\n  const theme = useTheme();\n  const primaryColor = theme.palette.primary.main;\n  const gray2 = theme.palette.gray2.main;\n  const navigate = useNavigate();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [alertMsg, setAlertMsg] = useState(null);\n\n  const { user, storeLoginData } = useAuth();\n\n  const validateForm = () => {\n    if (!email) return \"Please enter your email address\";\n    if (!password) return \"Please enter your password\";\n\n    return null;\n  };\n\n  const rolePage = (role) => {\n    if(role === \"admin\"){\n      navigate(\"/admin/user\");\n    }\n    else{\n      navigate(\"/\");\n    }\n  };\n\n  const tryLogin = () => {\n    const errorMsg = validateForm();\n    if (errorMsg) {\n      setAlertMsg(<Alert severity=\"error\">{errorMsg}</Alert>);\n      return;\n    }\n\n    login(email, password)\n      .then((res) => {\n        storeLoginData(res.data);\n        rolePage(res.data.user_data.role_name);\n      })\n      .catch((err) => {\n        const errorMsg = err?.response?.data || \"Unknown error occured\";\n        setAlertMsg(<Alert severity=\"error\">{errorMsg}</Alert>);\n      });\n  };\n\n  // Remove the alert whenever any input value changes\n  useEffect(() => {\n    setAlertMsg(null);\n  }, [email, password]);\n\n  // Redirect authenticated user back to the previous page\n  if (user) {\n    return <Navigate to={-1} replace />;\n  }\n\n  return (\n    <Container maxWidth=\"616px\" sx={{ maxWidth: \"616px\", mt: \"60px\" }}>\n      <Helmet>\n        <title>SOUP | Login</title>\n      </Helmet>\n      <Stack component=\"form\" spacing={5} mb=\"60px\" sx={{ textAlign: \"left\" }}>\n        <Stack spacing={2}>\n          <Typography\n            variant=\"h5\"\n            component=\"h1\"\n            sx={{ color: primaryColor, fontWeight: \"500\" }}\n          >\n            Welcome Back! Cheff\n          </Typography>\n          <Typography paragraph={true} sx={{ color: gray2 }}>\n            Please login first\n          </Typography>\n        </Stack>\n        <Stack spacing={3}>\n          {alertMsg}\n          <TextField\n            required\n            type=\"email\"\n            label=\"Email\"\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <TextField\n            required\n            type=\"password\"\n            label=\"Password\"\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <Typography paragraph={true} sx={{ color: gray2 }}>\n            Forgot Password? <CustomLink to=\"/resetpasswordemail\">Click Here</CustomLink>\n          </Typography>\n        </Stack>\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          sx={{\n            width: \"140px\",\n            alignSelf: \"flex-end\",\n            borderRadius: \"8px\",\n            color: primaryColor,\n            textTransform: \"none\",\n          }}\n          onClick={tryLogin}\n        >\n          Login\n        </Button>\n      </Stack>\n      <Typography\n        paragraph={true}\n        sx={{\n          textAlign: \"center\",\n        }}\n      >\n        Dont have account? <CustomLink to=\"/register\">Sign Up here</CustomLink>\n      </Typography>\n    </Container>\n  );\n};\n\nexport default LoginPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}