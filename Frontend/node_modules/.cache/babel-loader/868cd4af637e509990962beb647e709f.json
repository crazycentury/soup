{"ast":null,"code":"var _jsxFileName = \"/Users/work/Documents/FinalProject/soup/src/Component/BaseAdminView/BaseAdminView.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport PaymentIcon from \"@mui/icons-material/Payment\";\nimport PaymentsIcon from \"@mui/icons-material/Payments\";\nimport PersonIcon from \"@mui/icons-material/Person\";\nimport { Navigate, useLocation } from \"react-router-dom\";\nimport useAuth from \"../../hook/useAuth\";\nimport Sidebar from \"./Sidebar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst sidebarItems = [{\n  text: \"Invoice\",\n  icon: /*#__PURE__*/_jsxDEV(PaymentsIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 11\n  }, this),\n  path: \"/invoice\",\n  child_pattern: /^\\/detailinvoice\\/\\d+$/,\n  roles: [\"user\", \"admin\"]\n}, {\n  text: \"Payment Method\",\n  icon: /*#__PURE__*/_jsxDEV(PaymentIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 11\n  }, this),\n  path: \"/admin/payment-method\",\n  roles: [\"admin\"]\n}, {\n  text: \"User Page\",\n  icon: /*#__PURE__*/_jsxDEV(PersonIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 11\n  }, this),\n  path: \"/admin/user\",\n  roles: [\"admin\"]\n}];\n\nfunction isAuthorized(user, path) {\n  const sidebarItem = sidebarItems.find(item => item.path === path || path.match(item.child_pattern));\n  return user && sidebarItem.roles.some(role => role === user.role_name);\n}\n\nconst BaseAdminView = props => {\n  _s();\n\n  const location = useLocation();\n  const {\n    user,\n    isValidatingToken\n  } = useAuth();\n  const {\n    children\n  } = props;\n  const [sidebarList, setSidebarList] = useState([]);\n  useEffect(() => {\n    const authorizedMenu = sidebarItems.filter(item => isAuthorized(user, item.path));\n    setSidebarList(authorizedMenu);\n  }, [user]);\n\n  if (!isValidatingToken && !isAuthorized(user, location.pathname)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    mt: 12,\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 2,\n      children: /*#__PURE__*/_jsxDEV(Sidebar, {\n        items: sidebarList,\n        isAuthorized: isAuthorized\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 10,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BaseAdminView, \"m8k4vmYf3jAJm+tC4uWm9ecGiHc=\", false, function () {\n  return [useLocation, useAuth];\n});\n\n_c = BaseAdminView;\nexport default BaseAdminView;\n\nvar _c;\n\n$RefreshReg$(_c, \"BaseAdminView\");","map":{"version":3,"names":["React","useEffect","useState","Grid","PaymentIcon","PaymentsIcon","PersonIcon","Navigate","useLocation","useAuth","Sidebar","sidebarItems","text","icon","path","child_pattern","roles","isAuthorized","user","sidebarItem","find","item","match","some","role","role_name","BaseAdminView","props","location","isValidatingToken","children","sidebarList","setSidebarList","authorizedMenu","filter","pathname"],"sources":["/Users/work/Documents/FinalProject/soup/src/Component/BaseAdminView/BaseAdminView.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport Grid from \"@mui/material/Grid\";\n\nimport PaymentIcon from \"@mui/icons-material/Payment\";\nimport PaymentsIcon from \"@mui/icons-material/Payments\";\nimport PersonIcon from \"@mui/icons-material/Person\";\n\nimport { Navigate, useLocation } from \"react-router-dom\";\n\nimport useAuth from \"../../hook/useAuth\";\n\nimport Sidebar from \"./Sidebar\";\n\nconst sidebarItems = [\n  {\n    text: \"Invoice\",\n    icon: <PaymentsIcon />,\n    path: \"/invoice\",\n    child_pattern: /^\\/detailinvoice\\/\\d+$/,\n    roles: [\"user\", \"admin\"],\n  },\n  {\n    text: \"Payment Method\",\n    icon: <PaymentIcon />,\n    path: \"/admin/payment-method\",\n    roles: [\"admin\"],\n  },\n  {\n    text: \"User Page\",\n    icon: <PersonIcon />,\n    path: \"/admin/user\",\n    roles: [\"admin\"],\n  },\n];\n\nfunction isAuthorized(user, path) {\n  const sidebarItem = sidebarItems.find(\n    (item) => item.path === path || path.match(item.child_pattern)\n  );\n  return user && sidebarItem.roles.some((role) => role === user.role_name);\n}\n\nconst BaseAdminView = (props) => {\n  const location = useLocation();\n  const { user, isValidatingToken } = useAuth();\n\n  const { children } = props;\n\n  const [sidebarList, setSidebarList] = useState([]);\n\n  useEffect(() => {\n    const authorizedMenu = sidebarItems.filter((item) =>\n      isAuthorized(user, item.path)\n    );\n    setSidebarList(authorizedMenu);\n  }, [user]);\n\n  if (!isValidatingToken && !isAuthorized(user, location.pathname)) {\n    return <Navigate to={\"/\"} />;\n  }\n\n  return (\n    <Grid container mt={12}>\n      <Grid item xs={2}>\n        <Sidebar items={sidebarList} isAuthorized={isAuthorized} />\n      </Grid>\n      <Grid item xs={10}>\n        {children}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default BaseAdminView;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}